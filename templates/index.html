<!DOCTYPE html>
<html>
<head>
    <title>Indian Stock Dashboard</title>

    <style>
        body {
            font-family: Arial;
            background: linear-gradient(to right,#0f2027,#203a43,#2c5364);
            color: white;
            margin:0;
        }

        header{
            background:#111;
            padding:15px;
            display:flex;
            justify-content:space-between;
            align-items:center;
        }

        .logo{
            font-size:22px;
            font-weight:bold;
            color:#00e5ff;
        }

        .btn{
            padding:10px 15px;
            background:orange;
            border:none;
            border-radius:6px;
            cursor:pointer;
            font-weight:bold;
            margin:5px;
        }

        .container{
            padding:30px;
            text-align:center;
        }

        .card{
            background:#111;
            padding:20px;
            margin:15px;
            border-radius:10px;
            box-shadow:0 0 10px cyan;
        }

        input{
            padding:10px;
            width:250px;
            border-radius:6px;
            border:none;
        }

        table{
            width:100%;
            background:#000;
            margin-top:20px;
            border-collapse:collapse;
        }

        th,td{
            padding:10px;
            border:1px solid #444;
        }

        th{background:orange;color:black}
    </style>
</head>

<body>

<header>
    <div class="logo">ðŸ“ˆ Indian Stock Pro</div>
    <div>
        <a href="/admin"><button class="btn">Admin Dashboard</button></a>
    </div>
</header>

<div class="container">

    <h1>ðŸ”¥ Indian Stock Market Dashboard</h1>
    <p>Developed by Nivrutti Aware | StepUp Classes Founder</p>

    <!-- Subscribe -->
    <div class="card">
        <h2>ðŸ“© Subscribe for Stock Alerts</h2>
        <input type="email" id="email" placeholder="Enter email">
        <button class="btn" onclick="subscribe()">Subscribe</button>
        <p id="submsg"></p>
    </div>

    <!-- Market News -->
    <div class="card">
        <h2>ðŸ“° Latest Market News</h2>
        <button class="btn" onclick="loadNews()">Load News</button>

        <table>
            <thead>
                <tr>
                    <th>Title</th>
                    <th>Source</th>
                </tr>
            </thead>
            <tbody id="newsTable"></tbody>
        </table>
    </div>

</div>

<script>

function subscribe(){
    let email=document.getElementById("email").value;

    fetch("/subscribe",{
        method:"POST",
        headers:{"Content-Type":"application/json"},
        body:JSON.stringify({email:email})
    })
    .then(r=>r.json())
    .then(d=>{
        document.getElementById("submsg").innerHTML=
        "âœ… Subscribed! Total: "+d.total;
    })
}

function loadNews(){
    fetch("/get_news")
    .then(r=>r.json())
    .then(data=>{
        let table="";
        if(data.data){
            data.data.forEach(n=>{
                table+=`<tr>
                <td>${n.title}</td>
                <td>${n.source}</td>
                </tr>`
            })
        }
        document.getElementById("newsTable").innerHTML=table;
    })
}

</script>

</body>
</html>

