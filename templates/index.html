<!DOCTYPE html>
<html>
<head>
<title>Indian Stock Dashboard</title>

<style>
body{
    font-family: Arial;
    background:#0f172a;
    color:white;
    margin:0;
}

.header{
    background:#020617;
    padding:20px;
    text-align:center;
    font-size:28px;
    font-weight:bold;
}

.container{
    width:90%;
    margin:auto;
    padding:20px;
}

h2{
    color:#22c55e;
}

input{
    padding:12px;
    width:260px;
    border-radius:6px;
    border:none;
}

button{
    padding:12px 18px;
    border:none;
    border-radius:6px;
    background:#22c55e;
    color:white;
    cursor:pointer;
    font-weight:bold;
}

.grid{
    display:grid;
    grid-template-columns:repeat(auto-fit,minmax(300px,1fr));
    gap:20px;
    margin-top:20px;
}

.card{
    background:#1e293b;
    padding:20px;
    border-radius:12px;
    box-shadow:0 0 10px black;
}

.news{
    background:#020617;
    padding:12px;
    margin:10px 0;
    border-radius:8px;
}

.adminbtn{
    background:#3b82f6;
}
</style>
</head>

<body>

<div class="header">
ğŸ“ˆ Indian Stock Market Dashboard  
<br>
<span style="font-size:16px">Developed by Nivrutti Aware | StepUp Classes</span>
</div>

<div class="container">

<!-- SEARCH -->
<h2>ğŸ” Search Stock</h2>
<input id="stockname" placeholder="Enter stock name like TCS">
<button onclick="searchStock()">Search</button>

<div id="stockresult" class="grid"></div>

<hr>

<!-- BUTTONS -->
<button onclick="loadPrice()">ğŸ“Š Price Shockers</button>
<button onclick="loadIPO()">ğŸš€ IPO Details</button>
<button onclick="loadNews()">ğŸ“° Market News</button>

<div id="price" class="grid"></div>
<div id="ipo" class="grid"></div>
<div id="news"></div>

<hr>

<!-- SUBSCRIBE -->
<h2>ğŸ’ Subscribe for Premium Alerts</h2>
<input id="name" placeholder="Name">
<input id="email" placeholder="Email">
<input id="phone" placeholder="Phone">
<input id="plan" placeholder="Plan">
<button onclick="subscribe()">Subscribe</button>

<br><br>

<a href="/admin" target="_blank">
<button class="adminbtn">ğŸ” Open Admin Dashboard</button>
</a>

</div>

<script>

// SEARCH STOCK
function searchStock(){
let s=document.getElementById("stockname").value;

fetch("/search/"+s)
.then(r=>r.json())
.then(d=>{

let html="";

if(d.data){
let stock=d.data[0];

html+=`
<div class="card">
<h3>ğŸ“Š ${stock.name}</h3>
<p>ğŸ’° Price: ${stock.price}</p>
<p>ğŸ“ˆ Change: ${stock.change}</p>
<p>ğŸ“Š Market Cap: ${stock.marketCap}</p>
<p>ğŸ¢ Exchange: ${stock.exchange}</p>
</div>
`;
}else{
html="<div class='card'>No Data Found</div>";
}

document.getElementById("stockresult").innerHTML=html;
});
}


// PRICE SHOCKERS
function loadPrice(){
fetch("/price")
.then(r=>r.json())
.then(d=>{

let html="";
let arr=d.data || [];

arr.forEach(x=>{
html+=`
<div class="card">
<h3>${x.symbol}</h3>
<p>Price: ${x.price}</p>
<p style="color:lime">Change: ${x.percentChange}%</p>
</div>
`;
});

document.getElementById("price").innerHTML=html;
});
}


// IPO
function loadIPO(){
fetch("/ipo")
.then(r=>r.json())
.then(d=>{

let html="";
let arr=d.data || [];

arr.forEach(x=>{
html+=`
<div class="card">
<h3>${x.name}</h3>
<p>Price: ${x.price}</p>
<p>Open: ${x.openDate}</p>
<p>Close: ${x.closeDate}</p>
</div>
`;
});

document.getElementById("ipo").innerHTML=html;
});
}


// NEWS
function loadNews(){
fetch("/news")
.then(r=>r.json())
.then(d=>{

let html="";
let arr=d.data || [];

arr.forEach(n=>{
html+=`
<div class="news">
ğŸ“° ${n.title} <br>
<a href="${n.url}" target="_blank">Read More</a>
</div>
`;
});

document.getElementById("news").innerHTML=html;
});
}


// SUBSCRIBE
function subscribe(){
fetch("/subscribe",{
method:"POST",
headers:{"Content-Type":"application/json"},
body:JSON.stringify({
name:document.getElementById("name").value,
email:document.getElementById("email").value,
phone:document.getElementById("phone").value,
plan:document.getElementById("plan").value
})
})
.then(r=>r.json())
.then(d=>alert(d.msg));
}

</script>
</body>
</html>
